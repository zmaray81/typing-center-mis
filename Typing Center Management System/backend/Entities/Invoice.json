{
  "name": "Invoice",
  "type": "object",
  "properties": {
    "invoice_number": {
      "type": "string",
      "description": "Auto-generated invoice number (INV-DDMMYYYY/XXXX)"
    },
    "quotation_id": {
      "type": "string",
      "description": "Reference to quotation if converted"
    },
    "quotation_number": {
      "type": "string",
      "description": "Quotation number if converted"
    },
    "client_id": {
      "type": "string",
      "description": "Reference to client"
    },
    "client_name": {
      "type": "string",
      "description": "Client/Company name"
    },
    "person_name": {
      "type": "string",
      "description": "Person name (for visa services)"
    },
    "service_type": {
      "type": "string",
      "description": "Main service type for naming"
    },
    "license_type": {
      "type": "string",
      "description": "License type (e.g., Professional/Commercial)"
    },
    "activity": {
      "type": "string",
      "description": "Business activity"
    },
    "date": {
      "type": "string",
      "format": "date",
      "description": "Invoice date"
    },
    "items": {
      "type": "array",
      "description": "Line items",
      "items": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string"
          },
          "amount": {
            "type": "number"
          }
        }
      }
    },
    "subtotal": {
      "type": "number",
      "description": "Subtotal amount"
    },
    "include_vat": {
      "type": "boolean",
      "description": "Whether VAT is included"
    },
    "vat_amount": {
      "type": "number",
      "description": "VAT amount (5%)"
    },
    "total": {
      "type": "number",
      "description": "Total amount"
    },
    "payment_status": {
      "type": "string",
      "enum": [
        "unpaid",
        "partial",
        "paid"
      ],
      "description": "Payment status"
    },
    "amount_paid": {
      "type": "number",
      "description": "Amount already paid"
    },
    "balance": {
      "type": "number",
      "description": "Remaining balance"
    },
    "payments": {
      "type": "array",
      "description": "Payment records",
      "items": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string"
          },
          "amount": {
            "type": "number"
          },
          "method": {
            "type": "string"
          },
          "reference": {
            "type": "string"
          }
        }
      }
    },
    "notes": {
      "type": "string",
      "description": "Additional notes"
    }
  },
  "required": [
    "invoice_number",
    "client_name",
    "date",
    "items",
    "total",
    "payment_status"
  ]
}